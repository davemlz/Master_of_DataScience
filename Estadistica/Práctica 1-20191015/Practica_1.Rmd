---
title: "Práctica 1"
output:
  html_document:
    df_print: paged
---

## David Montero Loaiza

### Problema 1

Considera los datos de la liga NBA de baloncesto profesional de la temporada 2014-2015 que figuran en el archivo players stats.csv.

```{r}
path = "C:/Users/Dave Mont/Desktop/Estadistica/Práctica 1-20191015/players_stats.csv"
df = read.csv(path,sep = ",",header = TRUE,dec = ".",fill = TRUE)
```

#### i) Representa gráficamente las datos de la columna Height de forma que se aprecie la distribución de los datos.

```{r}
# HISTOGRAMA DE LOS DATOS DE ALTURA
hist(df$Height,breaks = 20,xlab = "Height",main = "Height Histogram")
```

#### ii) Calcula la media muestral y represéntala mediante una línea en la gráfica.

```{r}
# MEDIA MUESTRAL
m = mean(df$Height,na.rm = TRUE)
paste("La media de altura es",m)

# HISTOGRAMA DE LOS DATOS DE ALTURA
hist(df$Height,breaks = 20,xlab = "Height",main = "Height Histogram")
abline(v = m,col = "red")
```

#### iii) Calcula la desviación típica muestral y representa el intervalo media muestral $\pm$ desviación típica muestral en la gráfica.

```{r}
# DESVIACION ESTANDAR
desvest = sd(df$Height,na.rm = TRUE)
paste("La desviación estándar de la altura es",desvest)

# HISTOGRAMA DE LOS DATOS DE ALTURA
hist(df$Height,breaks = 20,xlab = "Height",main = "Height Histogram")
abline(v = m,col = "red")
abline(v = m + desvest,col = "blue",lty = 2)
abline(v = m - desvest,col = "blue",lty = 2)
```

#### iv) Comenta brevemente la gráfica.

El promedio de alturas ronda los 200 cm y estas tienen una desviación típica de aproximadamente 9 cm. Los datos se concentran mayormente entre $\pm$ desviaciones estándar, aunque haya una frecuencia alta de alturas por encima de los 200 cm.

### Problema 2

Descarga los datos de extensión de hielo ártico del directorio: ftp://sidads.colorado.edu/DATASETS/NOAA/G02135/north/daily/data/

#### i) Carga los datos en R. Recomendación: Elimina la segunda línea del archivo.

```{r}
# CARGAR DATOS
path = "C:/Users/Dave Mont/Desktop/Estadistica/Práctica 1-20191015/N_seaice_extent_daily_v3.0.csv"
df = read.csv(path,sep = ",",header = TRUE,dec = ".",fill = TRUE)
df = df[-1,]

# CONVERTIR DATOS A NUMERICOS
for(i in 1:5){
  df[,i] = as.numeric(as.vector(df[,i]))
}
```

#### ii) Averigua en qué meses suelen ser las extensiones máximas y mínimas.

```{r}
# FUNCION PARA OBTENER MESES CON EXTENSIONES MAXIMAS Y MINIMAS (U OTRA ESTADISTICA)
get_stat_month = function(df,stat){
  
  stat_year = tapply(df$Extent,df$Year,stat)
  years = unique(df$Year)
  stat_month_year = NULL
  
  for(i in 1:length(years)){
    year_df = df[df$Year == years[i],]
    year_stat_month = tapply(year_df$Extent,year_df$Month,stat)
    stat_month_year[i] = which(year_stat_month == stat_year[i])
  }
  
  stat_df = data.frame(years,stat_month_year)
  
  return(stat_df)
  
}

# MESES CON EXTENSIONES MAXIMAS
max_months = get_stat_month(df,max)
max_months

# MESES CON EXTENSIONES MÍNIMAS
min_months = get_stat_month(df,min)
min_months
```

#### iii) Representa gráficamente los datos de extensión medianos de cada mes.

```{r}
# EXTENSION MEDIANA DE CADA MES
median_month = tapply(df$Extent,df$Month,median)

# GRAFICO DE EXTENSION MEDIANA
plot(1:12,median_month,type = "l",main = "Extensión mediana de cada mes",xlab = "Mes",ylab = "Extensión")
```

#### iv) Añade una región sombreada correspondiente a los percentiles del 5% y 95% de cada mes.

```{r}
# EXTENSION MEDIA DE CADA MES
mean_month = tapply(df$Extent,df$Month,mean)

# PERCENTILES DEL 5% Y DEL 95%
q0.05_month = tapply(df$Extent,df$Month,quantile,probs = 0.05)
q0.95_month = tapply(df$Extent,df$Month,quantile,probs = 0.95)

x = 1:12

# GRAFICO DE EXTENSION MEDIANA
plot(1:12,median_month,ylim = c(0,20),type = "l",main = "Extensión mediana de cada mes",xlab = "Mes",ylab = "Extensión")
polygon(c(x, rev(x)), c(q0.95_month, rev(q0.05_month)), col = "grey80", border = NA)
lines(x,median_month,col = "red")
```

#### v) Añaade una línea correspondiente a los datos de 2019 y otra para los datos de 2012.

```{r}
# DATOS MEDIANOS DEL 2012 Y 2019
df_2012 = df[df$Year == 2012,]
df_2019 = df[df$Year == 2019,]

month_2012 = tapply(df_2012$Extent,df_2012$Month,median)
month_2019 = tapply(df_2019$Extent,df_2019$Month,median)

# GRAFICO DE EXTENSION MEDIANA
plot(1:12,median_month,ylim = c(0,20),type = "l",main = "Extensión mediana",xlab = "Mes",ylab = "Extensión")
polygon(c(x, rev(x)), c(q0.95_month, rev(q0.05_month)), col = "grey80", border = NA)
lines(x,median_month,col = "red")
lines(x,month_2012,col = "green")
lines(1:10,month_2019,col = "blue")
legend("bottomleft",lty=1,col = c("red","green","blue"),c("Mediana","2012","2019"))
```

#### vi) Comenta brevemente la gráfica.

Entre los 6 y los 12 meses los datos se dispersan un poco más que en el resto de meses. En comparación con la mediana, los valores medianos del 2012 y 2019 de extensión son menores en el segundo semestre del año. Los datos del 2019 muestran que la extensión es menor que la mediana durante todo el tiempo.